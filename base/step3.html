<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>步骤3：受控输入</title>
    <style>
        [v-cloak]{display:none}
        body{font-family:system-ui;margin:20px}
        .row{margin:8px 0}
        label{display:inline-block;width:80px}
        input{padding:6px 8px}
    </style>
</head>
<body>
<div id="app" v-cloak>
    <h1>{{ title }}</h1>

    <div class="row">
        <label for="name">名称</label>
        <input id="name" type="text" v-bind:value="addForm.name" v-on:input="onAddNameInput">
    </div>
    <div class="row">
        <label for="hp">血量</label>
        <input id="hp" type="number" min="0" v-bind:value="addForm.hp" v-on:input="onAddHpInput">
    </div>
    <p>当前表单：{{ addForm }}</p>
</div>

<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
<script>
    (function () {
        var reactive = Vue.reactive;  // 用于对象、数组的响应式
        var ref = Vue.ref;

        function createEmptyHero() {
            return { id: 0, name: '', hp: '' };
        }

        var app = Vue.createApp({
            setup: function () {
                var title = ref('英雄管理面板（步骤3）');
                var addForm = reactive(createEmptyHero());  // 将一个 对象 变成 响应式 对象

                function onAddNameInput(e) {
                    addForm.name = e.target.value;
                }

                function onAddHpInput(e) {
                    addForm.hp = e.target.value;
                }

                return {
                    title: title,
                    addForm: addForm,
                    onAddNameInput: onAddNameInput,
                    onAddHpInput: onAddHpInput
                };
            }
        });

        app.mount('#app');
    })();
</script>
</body>
</html>